# 功能：抹掉所有内容和设置

## 目的

允许用户将应用恢复到初始安装状态，清除所有用户数据和配置。此功能提供完整的重置机制，包括数据库、配置文件和系统凭据的清除，确保用户可以从干净的状态重新开始使用应用。

## 需求

### 需求：抹掉所有内容和设置入口

系统必须在关于页面提供抹掉所有内容和设置的入口。

#### 场景：显示抹掉所有内容和设置按钮

**假设** 用户打开「关于」页面
**当** 页面加载完成
**那么** 页面底部显示「危险操作」区域
**并且** 区域内显示红色「抹掉所有内容和设置」按钮
**并且** 按钮下方显示警告说明文字

### 需求：抹掉所有内容和设置确认

执行抹掉所有内容和设置前必须经过用户确认。

#### 场景：点击抹掉所有内容和设置按钮

**假设** 用户在关于页面
**当** 用户点击「抹掉所有内容和设置」按钮
**那么** 显示确认对话框
**并且** 对话框标题为「抹掉所有内容和设置」
**并且** 对话框内容列出将被删除的数据类型
**并且** 显示「取消」和「确认重置」按钮

#### 场景：取消抹掉所有内容和设置

**假设** 确认对话框已显示
**当** 用户点击「取消」按钮
**那么** 关闭对话框
**并且** 不执行任何清除操作

### 需求：执行抹掉所有内容和设置

系统必须在用户确认后执行数据清除并重启应用。

#### 场景：确认执行抹掉所有内容和设置

**假设** 确认对话框已显示
**当** 用户点击「确认重置」按钮
**那么** 删除数据库文件
**并且** 删除配置文件（config.toml、template_config.toml）
**并且** 保留默认模板文件（templates/default.toml）
**并且** 清除系统钥匙串中的所有应用凭据
**并且** 显示重置成功提示
**并且** 自动重启应用

#### 场景：重置过程中发生错误

**假设** 用户已确认执行抹掉所有内容和设置
**当** 删除文件或清除凭据过程中发生错误
**那么** 继续尝试清除其他数据
**并且** 记录错误日志
**并且** 完成后仍然重启应用

### 需求：清除凭据范围

抹掉所有内容和设置时必须清除所有存储的敏感凭据。

#### 场景：清除 QRZ.cn 凭据

**假设** 用户已保存 QRZ.cn 登录信息
**当** 执行抹掉所有内容和设置
**那么** 清除 QRZ.cn 用户名
**并且** 清除 QRZ.cn 密码
**并且** 清除 QRZ.cn 会话信息

#### 场景：清除 QRZ.com 凭据

**假设** 用户已保存 QRZ.com 登录信息
**当** 执行抹掉所有内容和设置
**那么** 清除 QRZ.com 用户名
**并且** 清除 QRZ.com 密码
**并且** 清除 QRZ.com 会话信息

#### 场景：清除顺丰速运凭据

**假设** 用户已配置顺丰速运
**当** 执行抹掉所有内容和设置
**那么** 清除顺丰环境配置
**并且** 清除顺丰顾客编码
**并且** 清除顺丰校验码（生产和沙箱）

#### 场景：清除云同步凭据

**假设** 用户已配置云同步
**当** 执行抹掉所有内容和设置
**那么** 清除云同步 API Key
