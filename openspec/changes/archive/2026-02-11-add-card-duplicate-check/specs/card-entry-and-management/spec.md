## 修改需求

### 需求：卡片录入功能

系统必须提供卡片录入功能，支持单条录入和连续录入模式。录入时必须检查同项目下是否已存在相同呼号，禁止重复录入。

#### 场景：单条卡片录入

- **当** 用户打开卡片录入弹窗
- **那么** 系统必须显示表单：
  - 项目选择下拉框（必填）
  - 呼号输入框（必填）
  - 数量输入框（必填）
- **并且** 用户填写并提交表单
- **那么** 系统必须验证输入：
  - 呼号长度 3-10 字符
  - 呼号仅包含字母、数字、斜杠
  - 数量范围 1-9999
  - 同项目下呼号不得重复
- **并且** 系统必须将呼号自动转为大写
- **并且** 系统必须创建卡片记录：
  - `status` 初始值为 `pending`
  - `created_at` 和 `updated_at` 为当前东八区时间
- **并且** 提交成功后关闭弹窗

#### 场景：同项目同呼号重复录入时拒绝

- **当** 用户录入卡片
- **并且** 该项目下已存在相同呼号的卡片记录
- **那么** 后端必须拒绝创建，返回参数错误："该呼号已在此项目中录入"
- **并且** 前端必须显示错误提示
- **并且** 不得创建重复卡片记录

#### 场景：前端即时检测呼号重复

- **当** 用户选择项目后
- **那么** 系统必须预加载该项目下所有已有呼号到本地集合
- **并且** 用户输入呼号时，系统必须在本地集合中比对
- **并且** 如果呼号已存在，必须在输入框下方即时显示校验错误："该呼号已在此项目中录入"
- **并且** 提交按钮必须被阻止（表单校验不通过）

#### 场景：连续录入模式下检测重复

- **当** 用户勾选"连续录入"选项
- **并且** 用户提交表单成功
- **那么** 系统必须将刚录入的呼号追加到本地呼号集合中
- **并且** 下一次输入相同呼号时，必须被即时拦截
- **并且** 无需重新请求后端加载呼号列表

#### 场景：连续录入模式

- **当** 用户勾选"连续录入"选项
- **并且** 用户提交表单
- **那么** 系统必须保存卡片记录
- **并且** 系统必须清空呼号和数量输入框
- **并且** 系统必须保持项目选择不变
- **并且** 弹窗必须保持打开状态
- **并且** 焦点必须自动移到呼号输入框

#### 场景：呼号输入验证错误

- **当** 用户输入的呼号格式不正确（如包含特殊字符、长度不足）
- **那么** 系统必须显示错误提示
- **并且** 不得保存记录
- **并且** 焦点必须保持在呼号输入框

#### 场景：快捷键支持

- **当** 用户在录入弹窗中按下 Enter 键
- **那么** 系统必须提交表单
- **当** 用户按下 Esc 键
- **那么** 系统必须关闭弹窗

#### 场景：不同项目允许相同呼号

- **当** 用户在项目 A 中已录入呼号 "BV2ABC"
- **并且** 用户在项目 B 中录入呼号 "BV2ABC"
- **那么** 系统必须允许录入成功
- **并且** 重复检查仅限同一项目范围内
