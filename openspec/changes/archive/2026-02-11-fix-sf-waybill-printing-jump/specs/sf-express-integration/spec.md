## 新增需求

### 需求：顺丰面单接入全局 TSPL 参数
系统必须让顺丰面单打印接入全局 TSPL 参数（GAP、DIRECTION），并在配置缺失或非法时回退到兼容默认值。

#### 场景：使用默认兼容参数打印
- **当** 全局 TSPL 参数缺失
- **那么** 系统必须使用默认参数 `GAP 2mm,0mm` 与 `DIRECTION 1,0` 生成 TSPL 并执行打印
- **并且** 打印行为必须不影响普通标签与地址标签打印路径

#### 场景：使用自定义参数打印
- **当** 用户在打印机配置中设置了有效的全局 GAP 与 DIRECTION
- **那么** 系统必须使用该参数生成 TSPL 并执行打印
- **并且** 系统必须在日志中记录实际生效的关键参数

#### 场景：参数非法时自动回退
- **当** 全局 GAP 或 DIRECTION 超出允许范围或格式错误
- **那么** 系统必须拒绝非法值并回退到兼容默认参数
- **并且** 系统必须返回可读错误信息或警告日志

## 修改需求

### 需求：运单面单打印
系统**必须**支持通过顺丰云打印 API 打印运单面单，并保证顺丰打印链路在兼容参数策略下与统一打印行为保持一致。

#### 场景：从卡片列表打印面单（两步流程）
- **当** 用户在卡片列表中输入运单号并完成“获取预览 -> 确认打印”两步流程
- **那么** 系统必须先展示可确认的面单预览，再执行打印
- **并且** 打印阶段必须使用全局 TSPL 生效参数生成 TSPL
- **并且** 打印成功后必须返回成功提示

#### 场景：从分发界面打印面单
- **当** 用户在分发对话框点击“打印面单”并完成两步流程
- **那么** 系统必须自动带入默认运单号并允许用户修正
- **并且** 最终打印必须走与卡片列表一致的顺丰参数策略

#### 场景：获取面单失败处理
- **当** 运单号无效或顺丰接口返回错误
- **那么** 系统必须显示中文错误信息
- **并且** 在获取失败时禁止进入打印阶段

### 需求：PDF 转 TSPL 打印
系统**必须**将 PDF 面单转换为 TSPL 指令进行打印，并确保 TSPL 头参数来源可追踪且可配置。

#### 场景：PDF 渲染为点阵
- **当** 系统接收到顺丰面单 PDF
- **那么** 系统必须将 PDF 渲染为灰度图并转换为可打印位图数据
- **并且** 渲染尺寸必须使用顺丰面单固定规格 `76mm x 130mm @ 203 DPI`

#### 场景：生成 TSPL 指令
- **当** 系统根据位图生成 TSPL 指令
- **那么** 指令必须包含 SIZE、GAP、DIRECTION、CLS、BITMAP、PRINT
- **并且** GAP 与 DIRECTION 必须来自全局打印配置而非顺丰模块硬编码
- **并且** 系统必须记录关键指令头参数用于排查

## 移除需求
