# 提案：抹掉所有内容和设置功能

## 概述

在「关于」页面中添加「抹掉所有内容和设置」功能，允许用户一键清除所有数据并重启应用，恢复到初始安装状态。

## 为什么

用户可能需要在以下场景中重置应用：
- 应用数据损坏需要重新开始
- 转让设备给其他用户前清除个人数据
- 测试或演示目的需要干净的环境
- 解决因配置错误导致的问题

## 变更内容

- 新增 `factory_reset` Tauri 命令
- 新增 `clear_all_credentials()` 凭据清除函数
- 修改 `AboutView.vue` 添加危险操作区域

## 动机

用户可能需要在以下场景中重置应用：
- 应用数据损坏需要重新开始
- 转让设备给其他用户前清除个人数据
- 测试或演示目的需要干净的环境
- 解决因配置错误导致的问题

## 功能描述

### 清除范围

抹掉所有内容和设置将删除以下数据：

1. **数据库文件** (`cards.db`)
   - 所有项目数据
   - 所有卡片记录
   - 顺丰寄件人和订单数据

2. **配置文件**
   - `config.toml`（打印机配置）
   - `template_config.toml`（模板配置）
   - 不删除 `templates/default.toml`（默认模板保留）

3. **钥匙串凭据**（系统钥匙链）
   - QRZ.cn 凭据（用户名、密码、会话）
   - QRZ.com 凭据（用户名、密码、会话）
   - 顺丰速运凭据（环境、顾客编码、校验码）
   - 云同步凭据（API Key）

4. **日志文件**（可选，默认不删除）

### 保留内容

- `templates/default.toml`（默认打印模板）
- 应用程序本身

### 用户交互

1. 在「关于」页面添加「抹掉所有内容和设置」按钮（红色警告样式）
2. 点击后弹出二次确认对话框，明确告知将删除的内容
3. 用户确认后执行清除操作
4. 清除完成后自动重启应用

## 技术方案

### 后端（Rust）

新增 Tauri 命令 `factory_reset`：
1. 删除数据库文件
2. 删除配置文件（保留默认模板）
3. 清除所有钥匙串凭据
4. 返回成功后由前端触发重启

### 前端（Vue）

在 `AboutView.vue` 中添加：
1. 抹掉所有内容和设置按钮
2. 确认对话框组件
3. 调用后端命令并处理重启

## 影响范围

- 新增功能，不影响现有功能
- 需要新增一个 Tauri 命令
- 需要修改 `AboutView.vue`

## 风险评估

- **数据丢失风险**：通过二次确认对话框降低误操作风险
- **操作不可逆**：明确提示用户操作不可撤销

## 相关规范

- 无现有规范需要修改
- 新增规范：`factory-reset`
