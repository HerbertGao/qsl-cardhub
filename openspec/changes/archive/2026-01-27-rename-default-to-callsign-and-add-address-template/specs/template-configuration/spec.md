## 修改需求

### 需求：模板文件路径配置
模板文件加载路径必须正确配置，在开发模式下能够从项目根目录相对路径加载模板文件。

#### 场景：开发模式加载呼号模板
- **当** 在开发模式下（`debug_assertions` 启用）加载呼号模板
- **那么** 必须使用路径 `config/templates/callsign.toml`（从项目根目录开始）
- **并且** 必须成功加载模板配置文件
- **并且** 输出日志显示成功加载的模板路径

#### 场景：模板加载失败回退
- **当** 从文件加载模板失败
- **那么** 必须输出警告日志说明加载失败原因
- **并且** 必须回退到硬编码的默认模板配置
- **并且** 系统必须继续正常运行

#### 场景：向后兼容性处理
- **当** 配置文件中仍使用 `"default.toml"` 作为模板路径
- **那么** 系统必须自动回退到 `"callsign.toml"`
- **并且** 记录警告日志，说明已自动迁移

### 需求：模板配置读取接口
系统必须提供读取当前模板配置的接口，供前端获取完整的模板参数。

#### 场景：获取呼号模板配置
- **当** 前端调用 `get_template_config` 命令（不指定模板类型）
- **那么** 系统必须读取 `config/templates/callsign.toml` 文件
- **并且** 返回完整的 `TemplateConfig` 结构（包含 metadata, page, layout, fonts, elements, output）
- **并且** 如果文件不存在或格式错误，返回错误信息

#### 场景：获取地址模板配置
- **当** 前端调用 `get_address_template_config` 命令
- **那么** 系统必须读取 `config/templates/address.toml` 文件
- **并且** 返回完整的 `TemplateConfig` 结构
- **并且** 如果文件不存在或格式错误，返回错误信息

### 需求：模板配置保存接口
系统必须提供保存模板配置的接口，将用户修改的参数持久化到文件。

#### 场景：保存呼号模板配置到文件
- **当** 前端调用 `save_template_config` 命令并传入 `TemplateConfig` 结构（不指定模板类型）
- **那么** 系统必须将配置序列化为 TOML 格式
- **并且** 覆盖写入 `config/templates/callsign.toml` 文件
- **并且** 使用格式化的 TOML 输出（`toml::to_string_pretty`）保持可读性
- **并且** 保存成功后返回成功状态

#### 场景：保存地址模板配置到文件
- **当** 前端调用 `save_address_template_config` 命令并传入 `TemplateConfig` 结构
- **那么** 系统必须将配置序列化为 TOML 格式
- **并且** 覆盖写入 `config/templates/address.toml` 文件
- **并且** 使用格式化的 TOML 输出（`toml::to_string_pretty`）保持可读性
- **并且** 保存成功后返回成功状态

## 新增需求

### 需求：地址模板配置
系统必须支持地址模板配置，用于打印地址信息。

#### 场景：地址模板文件存在
- **当** 系统需要加载地址模板
- **那么** 必须从 `config/templates/address.toml` 加载模板配置
- **并且** 模板配置必须符合 v2 模板格式规范
- **并且** 如果文件不存在，系统应创建默认地址模板

#### 场景：地址模板元素配置
- **当** 地址模板被加载时
- **那么** 模板必须包含以下元素类型：
  - 呼号（用于标识）
  - 姓名（如果存在）
  - 中文地址（如果存在）
  - 英文地址（如果存在）
  - 邮寄方式（如果存在）
- **并且** 模板必须不包含日期相关元素

### 需求：双份打印布局
地址模板必须支持在同一张纸上打印两遍，上半部分和下半部分完全一致。

#### 场景：双份打印布局计算
- **当** 地址模板配置了双份打印模式（`duplicate_print = true`）
- **那么** 布局引擎必须计算上半部分的正常布局
- **并且** 必须复制所有元素到下半部分，垂直偏移为纸张高度的一半
- **并且** 上下两部分的所有元素（位置、大小、内容）必须完全一致

#### 场景：双份打印元素位置
- **当** 布局引擎计算双份打印布局时
- **那么** 上半部分的元素位置必须从顶部边距开始计算
- **并且** 下半部分的元素位置必须从纸张高度的一半开始计算
- **并且** 上下两部分对应元素的水平位置必须相同

#### 场景：双份打印内容一致性
- **当** 生成双份打印布局时
- **那么** 上半部分和下半部分的所有元素内容必须完全相同
- **并且** 元素类型、文本内容、格式必须一致
- **并且** 元素的大小和字体必须一致
