## 1. 添加依赖

- [x] 1.1 添加 include_dir 依赖
  - 在 `Cargo.toml` 中添加 `include_dir = "0.7"`

## 2. 重构迁移模块

- [x] 2.1 定义迁移数据结构
  - 创建 `Migration` 结构体
  - 包含 version、name、sql 字段

- [x] 2.2 实现迁移文件嵌入
  - 使用 `include_dir!` 宏嵌入 migrations 目录
  - 定义静态常量 `MIGRATIONS_DIR`

- [x] 2.3 实现文件名解析
  - 创建 `parse_version` 函数
  - 从文件名提取版本号（如 001_init.sql -> 1）

- [x] 2.4 实现迁移脚本收集
  - 创建 `parse_migrations` 函数
  - 遍历嵌入的目录
  - 按版本号排序

- [x] 2.5 重构迁移执行逻辑
  - 移除 `CURRENT_DB_VERSION` 常量
  - 移除 `get_migration_sql` 函数
  - 使用新的自动化迁移逻辑

## 3. 测试验证

- [x] 3.1 添加单元测试
  - 测试 `parse_version` 函数
  - 测试各种文件名格式

- [x] 3.2 集成测试
  - 测试新数据库初始化
  - 测试版本升级迁移
  - 验证迁移顺序正确

- [x] 3.3 边界情况测试
  - 空迁移目录
  - 无效文件名处理
  - 数据库已是最新版本

## 4. 清理和验证

- [x] 4.1 验证现有迁移文件兼容
  - 确保 001、002、003 迁移正常工作
  - 验证数据库版本记录正确

- [ ] 4.2 更新文档（可选）
  - 添加迁移文件命名规范说明
  - 更新 ARCHITECTURE.md
