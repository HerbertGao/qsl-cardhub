# local-credential-storage 规范增量

## 修改需求

### 需求：凭据存储方式

系统**必须**使用本地加密文件存储所有敏感凭据，移除对系统钥匙串的支持。

**修改原因：**
- 系统钥匙串在不同平台和环境下存在兼容性问题
- macOS 上未签名应用无法正确使用钥匙串
- 某些 Linux 桌面环境的 Secret Service 实现不稳定
- 生产环境出现凭据保存成功但实际未保存的问题
- 简化代码，提高跨平台稳定性

#### 场景：存储敏感信息

**操作步骤：**
1. 系统需要存储敏感信息（密码、API密钥等）

**预期结果：**
- 系统使用本地加密文件存储
- 加密文件路径为: `{app_data_dir}/credentials/keystore.enc`
- 存储键使用统一命名格式: `qsl-cardhub:{category}:{item}`
- 不再尝试使用系统钥匙串

---

#### 场景：查询存储方式

**操作步骤：**
1. 前端调用 `check_keyring_available` 命令

**预期结果：**
- 始终返回 `false`
- 前端显示存储方式为「本地加密文件」

---

#### 场景：应用启动初始化

**操作步骤：**
1. 应用启动

**预期结果：**
- 直接初始化加密文件存储
- 不再检测系统钥匙串可用性
- 日志输出「使用本地加密文件存储凭据」
