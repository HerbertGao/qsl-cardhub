# 规范：配置名称默认值

**功能**: 配置名称默认值
**模块**: web/ConfigView
**状态**: 草稿

---

## 新增需求

### 需求：新建配置时必须提供默认配置名称

`ConfigView` 组件在打开新建配置对话框时，必须为配置名称输入框提供默认值。默认值格式必须为 `"配置" + 年月日`，其中年月日格式为 `YYYYMMDD`（8位数字）。日期必须基于用户本地时区的当前日期。默认值必须在 `handleNewConfig` 方法中生成，并赋值给 `newConfigForm.value.name`。用户必须能够修改该默认值，输入框不能是只读的。

---

#### 场景：用户点击新建按钮时生成默认名称

**前置条件**:
- 用户在 ConfigView 页面
- 当前日期为 2026年1月21日

**操作**:
1. 用户点击"新建"按钮
2. 触发 `handleNewConfig` 方法

**预期结果**:
- 新建配置对话框打开
- 配置名称输入框显示默认值 `"配置20260121"`
- 用户可以修改或清空该默认值

---

#### 场景：跨越日期后默认名称自动更新

**前置条件**:
- 应用持续运行跨越午夜
- 前一天最后一次打开对话框显示 `"配置20260120"`

**操作**:
1. 日期变更到 2026年1月21日
2. 用户再次点击"新建"按钮

**预期结果**:
- 配置名称输入框显示新的默认值 `"配置20260121"`
- 默认值基于新的日期生成

---

#### 场景：用户修改默认名称后创建配置

**前置条件**:
- 新建配置对话框已打开
- 默认名称为 `"配置20260121"`

**操作**:
1. 用户将名称修改为 `"我的打印配置"`
2. 填写其他必填项（打印机名称）
3. 点击"创建"按钮

**预期结果**:
- 配置创建成功
- 配置名称为 `"我的打印配置"`（而非默认值）
- 配置列表中显示用户自定义的名称

---

#### 场景：用户清空名称后创建配置

**前置条件**:
- 新建配置对话框已打开
- 默认名称为 `"配置20260121"`

**操作**:
1. 用户清空配置名称输入框
2. 点击"创建"按钮

**预期结果**:
- 系统显示警告：`"请输入配置名称"`
- 配置创建失败
- 对话框保持打开状态

---

### 需求：日期格式化逻辑必须独立实现

配置名称默认值的日期格式化逻辑必须通过一个独立的函数 `getDefaultConfigName` 实现。该函数必须返回字符串类型，格式为 `"配置YYYYMMDD"`。函数必须使用 JavaScript 原生 `Date` 对象获取当前日期。年份必须为4位数字，月份和日期必须为2位数字（不足补零）。函数必须在 `ConfigView` 组件的 `<script setup>` 中定义。

---

#### 场景：getDefaultConfigName 函数返回正确格式

**前置条件**:
- 当前日期为 2026年1月21日

**操作**:
1. 调用 `getDefaultConfigName()`

**预期结果**:
- 函数返回字符串 `"配置20260121"`

---

#### 场景：getDefaultConfigName 处理月份日期补零

**前置条件**:
- 当前日期为 2026年3月5日

**操作**:
1. 调用 `getDefaultConfigName()`

**预期结果**:
- 函数返回字符串 `"配置20260305"`
- 月份和日期均正确补零

---

## 修改需求

### 需求：handleNewConfig 必须使用默认配置名称

`ConfigView` 组件的 `handleNewConfig` 方法在初始化 `newConfigForm.value.name` 时，必须调用 `getDefaultConfigName()` 函数获取默认值，而不是使用空字符串。其他字段（`taskName`、`printerName`）的初始化逻辑保持不变。该修改不得影响用户修改配置名称的能力。

---

#### 场景：修改后的 handleNewConfig 初始化默认名称

**前置条件**:
- 用户在 ConfigView 页面
- 当前日期为 2026年1月21日

**操作**:
1. 用户点击"新建"按钮
2. `handleNewConfig` 方法执行

**预期结果**:
- `newConfigForm.value.name` 被设置为 `"配置20260121"`
- `newConfigForm.value.taskName` 被设置为 `""`（保持不变）
- `newConfigForm.value.printerName` 被设置为 `availablePrinters.value[0] || ""`（保持不变）

---

## 移除需求

无

---

## 重命名需求

无

---

## 参考

- [JavaScript Date 对象文档](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Date)
- ConfigView 源码：`web/src/views/ConfigView.vue`（第270-277行）
