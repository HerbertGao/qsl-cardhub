## MODIFIED Requirements

### 需求：检查更新功能

应用必须提供检查更新功能，让用户能够发现并获取新版本。更新可用的判断条件为：存在更高版本号且对应平台的安装包已就绪。

#### 场景：手动检查更新

- **当** 用户在关于页面点击"检查更新"按钮
- **那么** 应用必须首先尝试通过 Tauri Updater 检查更新
- **并且** 如果 Tauri Updater 失败，必须通过 GitHub Releases API 获取最新版本信息
- **并且** 通过 GitHub API 检查时，必须同时验证 Release 资产中是否包含当前平台的安装包
- **并且** 仅当版本号更高且安装包已就绪时，才判定为"有更新可用"
- **并且** 如果版本号更高但安装包尚未就绪，必须显示"已是最新版本"
- **并且** 必须显示加载状态（如"正在检查..."）
- **并且** 如果有新版本且安装包已就绪，必须显示更新卡片，其中更新说明必须以 Markdown 富文本方式渲染
- **并且** 如果已是最新版本或安装包尚未就绪，必须显示"已是最新版本"提示
- **并且** 如果检查失败，必须显示友好的错误信息

#### 场景：网络错误处理

- **当** 检查更新时网络请求失败
- **那么** 必须显示"无法连接到更新服务器"错误
- **并且** 必须提供重试按钮
- **并且** 必须提供手动下载链接（指向 GitHub Releases 页面）

#### 场景：更新说明的 Markdown 渲染

- **当** 更新卡片展示更新说明时
- **那么** 必须使用 markdown-it 将 Markdown 源文本渲染为 HTML
- **并且** 渲染结果必须经过 DOMPurify 清洗后才能插入 DOM
- **并且** 必须支持标题（h1-h4）、无序列表、有序列表、段落、链接、行内代码和代码块的正确渲染
- **并且** 渲染结果中的链接必须在外部浏览器中打开（禁止在 WebView 内导航）
- **并且** 渲染区域必须具备简洁的排版样式，与应用整体风格一致

#### 场景：更新说明为空或为兜底文本

- **当** 更新说明内容为"无更新说明"
- **那么** 必须以纯文本方式展示"无更新说明"
- **并且** 禁止对兜底文本进行 Markdown 渲染

#### 场景：更新说明包含恶意内容

- **当** 更新说明的 Markdown 中包含 `<script>`、`<iframe>`、`onerror` 等危险标签或属性
- **那么** DOMPurify 必须移除所有危险标签和属性
- **并且** 清洗后的内容必须安全地展示，不执行任何脚本
- **并且** 清洗不影响正常 Markdown 内容的渲染
