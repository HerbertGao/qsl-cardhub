## ADDED Requirements

### 需求：查询结果页必须按分发方式补充已分发记录信息
根据呼号查询收卡信息的结果页在展示 `distributed` 状态记录时，必须按 `metadata.distribution` 显示分发方式信息，并保持备注行为与已有交互一致。

#### 场景：已分发且为自取
- **当** 查询结果中的某条记录 `status = distributed`
- **并且** `metadata.distribution.method = 自取`
- **那么** 该记录在状态下方必须显示“自取”
- **并且** 该“自取”展示禁止出现复制按钮

#### 场景：已分发且为代领
- **当** 查询结果中的某条记录 `status = distributed`
- **并且** `metadata.distribution.method = 代领`
- **那么** 该记录在状态下方必须显示“代领”
- **并且** 当 `metadata.distribution.proxy_callsign` 有值时必须同时显示代领人呼号
- **并且** 该分发方式展示禁止出现复制按钮

#### 场景：已分发保留备注复制能力
- **当** 查询结果中的某条记录 `status = distributed`
- **并且** `metadata.distribution.remarks` 有值
- **那么** 该记录必须继续显示备注内容
- **并且** 必须提供备注复制按钮

#### 场景：非已分发状态不显示分发方式扩展文案
- **当** 查询结果中的某条记录 `status` 不等于 `distributed`
- **那么** 页面禁止显示“自取/代领/代领人呼号”的分发方式扩展文案
- **并且** 状态展示继续遵循原有状态徽章规则

## MODIFIED Requirements

### 需求：按呼号查询收卡信息接口
系统**必须**提供基于呼号查询收卡信息的接口，供「根据呼号查询收卡信息的单独页面」及外部调用使用；该单独页面在展示查询结果时提供「订阅收卡」按钮，用于微信绑定（见 wechat-push 规范）。

#### 场景：按呼号查询成功

- **当** 调用方发送 GET 请求到按呼号查询接口（如 `GET /api/callsigns/:callsign` 或 `GET /api/query?callsign=BG7XYZ`），且通过认证（若接口要求）
- **那么** 服务端必须从 D1 中查询该呼号对应的卡片数据（基于同步得到的 cards 及关联的 projects）
- **并且** 返回该呼号下的收卡信息：至少包含项目名称、数量、状态、分发备注（若有）等与收卡相关的字段
- **并且** 若记录状态为 `distributed`，返回数据中必须包含可用于结果页展示分发方式的信息（如 `metadata.distribution.method`、`metadata.distribution.proxy_callsign`）
- **并且** 若无该呼号数据则返回空列表或 404，不泄露其他呼号数据

#### 场景：呼号查询未授权

- **当** 按呼号查询接口要求认证且未提供有效 API Key 或 Token
- **那么** 服务端必须返回 401 或 403
- **并且** 不返回任何卡片数据

#### 场景：查询接口供查询页与订阅入口使用

- **当** 部署「根据呼号查询收卡信息的单独页面」时
- **那么** 该页面必须调用本按呼号查询接口展示该呼号下的收卡信息
- **并且** 在展示结果时提供「订阅收卡」按钮与提示（订阅后将收到该呼号的卡片分发/物流信息），点击后进入微信授权并完成呼号–openid 绑定（见 wechat-push 规范）

## REMOVED Requirements

- 无
